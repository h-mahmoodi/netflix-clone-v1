import{j as e,L as b,r as c,a as v,m as w,n as M}from"./main-BPJ7WpKq.js";import{b as $}from"./index--7tQkVSj.js";const k="_carousel_mshhh_1",C="_header_mshhh_5",T="_movies_mshhh_9",q="_navigation_mshhh_18",d={carousel:k,header:C,movies:T,navigation:q},S="_card_ei01k_1",F="_image_ei01k_5",z="_shimmer_ei01k_1",E="_title_ei01k_13",L="_details_ei01k_21",K="_rating_ei01k_25",x={card:S,image:F,shimmer:z,title:E,details:L,rating:K};function A(){return e.jsx("div",{className:x.card,children:e.jsx("div",{className:x.image})})}const H="_header_wx4q5_1",I="_title_wx4q5_5",Q="_button_wx4q5_9",m={header:H,title:I,button:Q};function R({title:t,link:i}){return e.jsxs("div",{className:m.header,children:[e.jsx("h2",{className:m.title,children:t}),i&&e.jsx(b,{className:m.button,to:i,"aria-label":`show more ${t}`,children:"Show More"})]})}const Y="_navigation_1lz1p_1",B="_right_1lz1p_5",D="_left_1lz1p_6",G="_hidden_1lz1p_24",h={navigation:Y,right:B,left:D,hidden:G};function J({itemsCount:t,viewCount:i,handlerFn:r}){const[s,a]=c.useState(0);return c.useEffect(()=>{r(s)},[r,s]),t<5?null:e.jsxs("div",{className:h.navigation,children:[e.jsx("button",{className:`${h.left} ${s===0?h.hidden:void 0}`,onClick:()=>a(n=>n-1),"aria-label":"previous slide",children:e.jsx("i",{className:"fi fi-br-angle-left"})}),e.jsx("button",{className:`${h.right} ${s+i===t?h.hidden:void 0}`,onClick:()=>a(n=>n+1),"aria-label":"next slide",children:e.jsx("i",{className:"fi fi-br-angle-right"})})]})}function U({title:t,flag:i,link:r,grid:s=5,fetcher:a}){const[n,_]=c.useState([]),{isFetching:f,error:g,data:u}=v({queryKey:["MovieCarousel",t,i],queryFn:a,staleTime:5*60*1e3}),l=c.useMemo(()=>(u==null?void 0:u.results)||[],[u]),j=l.length;c.useEffect(()=>{_(l.slice(0,s))},[l,s]);const p=c.useCallback(o=>{_(l.slice(o,o+s))},[l,s]),y=()=>f?Array(s).fill(null).map((o,N)=>e.jsx(A,{},N)):l.length===0?e.jsx("div",{children:"No item found"}):n.map(o=>e.jsx($,{movie:o},o.id));return g?e.jsx("div",{className:d.error,children:"Failed to load movies."}):e.jsxs("div",{className:d.carousel,children:[e.jsx("div",{className:d.header,children:e.jsx(R,{title:t,link:r})}),e.jsx("div",{className:d.movies,style:{display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))"},children:y()}),e.jsx("div",{className:d.navigation,children:e.jsx(J,{itemsCount:j,viewCount:s,handlerFn:p})})]})}const V=({movieId:t})=>{const{data:i,isFetching:r,error:s}=v({queryKey:["movieTrailer",t],queryFn:async()=>w(t),staleTime:3e5}),a=i==null?void 0:i.filter(n=>n.type==="Trailer")[0];return r?e.jsx("div",{className:"flex items-center justify-center w-[700px] h-[400px]",children:e.jsx(M,{})}):s?e.jsx("div",{className:"flex items-center justify-center w-[700px] h-[400px]",children:"Something went wrong"}):e.jsx("div",{children:a&&e.jsx("iframe",{src:`https://www.youtube.com/embed/${a.key}?autoplay=1`,title:"YouTube video player",allowFullScreen:!0,allow:"autoplay",style:{width:"700px",height:"400px"}})})};export{V as M,U as a};

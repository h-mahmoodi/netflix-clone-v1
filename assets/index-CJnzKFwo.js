import{Q as R,A as v,B as b,C as w,D as E,r as c}from"./main-ntQAJh54.js";var p=class extends R{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,r){super.setOptions({...e,behavior:v()},r)}getOptimisticResult(e){return e.behavior=v(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,r){var P,g;const{state:i}=e,s=super.createResult(e,r),{isFetching:n,isRefetching:u,isError:a,isRefetchError:o}=s,t=(g=(P=i.fetchMeta)==null?void 0:P.fetchMore)==null?void 0:g.direction,f=a&&t==="forward",h=n&&t==="forward",l=a&&t==="backward",d=n&&t==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:b(r,i.data),hasPreviousPage:w(r,i.data),isFetchNextPageError:f,isFetchingNextPage:h,isFetchPreviousPageError:l,isFetchingPreviousPage:d,isRefetchError:o&&!f&&!l,isRefetching:u&&!h&&!d}}};function M(e,r){return E(e,p)}const N=({fetchNextPage:e,hasNextPage:r,isLoading:i})=>{const s=c.useRef(null),n=c.useRef(null),[u,a]=c.useState(!1),o=c.useRef(!1);return c.useEffect(()=>{if(!(!r||!u))return s.current||(s.current=new IntersectionObserver(t=>{t[0].isIntersecting&&!o.current&&(o.current=!0,e())},{threshold:.5})),n.current&&s.current.observe(n.current),()=>{var t;(t=s.current)==null||t.disconnect(),s.current=null}},[r,u,e]),c.useEffect(()=>{i||(o.current=!1)},[i]),c.useEffect(()=>{const t=()=>a(!0);return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),n};export{N as a,M as u};

import{r as o,j as e,q as w}from"./main-BXy35M1J.js";import{b}from"./index-CUS1yTeg.js";const _="_container_jfh6l_1",N="_gridLayout_jfh6l_5",g={container:_,gridLayout:N,"width-1-2":"_width-1-2_jfh6l_13","width-1-3":"_width-1-3_jfh6l_16","width-1-4":"_width-1-4_jfh6l_19","width-1-5":"_width-1-5_jfh6l_22","width-1-6":"_width-1-6_jfh6l_25"},S=o.forwardRef(({movies:c,grid:s=5},a)=>e.jsxs("div",{className:g.container,children:[e.jsx("div",{className:g.gridLayout,children:c==null?void 0:c.map((l,i)=>e.jsx("div",{className:g[`width-1-${s}`],children:e.jsx(b,{movie:l})},`${l.id}-${i}`))}),e.jsx("div",{className:g.moreButton,ref:a})]})),C=({options:c,movies:s,setter:a,searchParams:l,setSearchParams:i})=>{const[t,p]=o.useState({field:l.get("sortBy")||null,direction:l.get("sortDir")||null}),[m,f]=o.useState(s.length),u=o.useCallback(()=>{if(!t.field||!t.direction){a(s);return}const n=[...s].sort((x,j)=>{const r=x[t.field],d=j[t.field];return typeof r=="number"&&typeof d=="number"?t.direction==="asc"?r-d:d-r:typeof r=="string"&&typeof d=="string"?t.direction==="asc"?r.localeCompare(d):d.localeCompare(r):0});a(n)},[t.field,t.direction,s,a]),y=n=>{p(x=>{const j=x.field===n&&x.direction==="desc"?"asc":x.field===n&&x.direction==="asc"?null:"desc",r=j?{field:n,direction:j}:{field:null,direction:null};if(r.field&&r.direction)i({...Object.fromEntries(l.entries()),sortBy:r.field,sortDir:r.direction});else{const d=new URLSearchParams(l);d.delete("sortBy"),d.delete("sortDir"),i(d)}return r})};return o.useEffect(()=>{s.length!==m&&f(s.length),u()},[s.length,m,u]),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsx("div",{className:"flex items-center gap-3",children:c.map((n,x)=>e.jsxs("button",{className:`flex items-stretch
                    border border-zinc-800 bg-zinc-800
                     rounded-md overflow-hidden`,onClick:()=>y(n.field),children:[e.jsx("span",{className:"flex items-center px-3",children:t.field===n.field?t.direction==="asc"?e.jsx("i",{className:"flex fi fi-rr-sort-amount-up-alt"}):e.jsx("i",{className:"flex fi fi-rr-sort-amount-down-alt"}):e.jsx("i",{className:"flex fi fi-rr-sort-alt "})}),e.jsxs("span",{className:`text-base py-2 px-3
                 ${t.field===n.field?"bg-zinc-900":"bg-black hover:bg-zinc-950 text-zinc-300"} `,children:["Sort By ",n.display]})]},`${x}-${n.field}`))})})},h={columns:[4,5,6],selectedColumn:5},v=({defaultGrid:c,setSelectedGrid:s,searchParams:a,setSearchParams:l})=>{const[i,t]=o.useState(+a.get("column")||c||h.selectedColumn),p=()=>{if(h.columns.length>1){const m=h.columns.length,f=h.columns.indexOf(i);console.log(m,"/",f);const u=f<m-1?h.columns[f+1]:h.columns[0];t(u),l({...Object.fromEntries(a.entries()),column:`${u}`})}};return o.useEffect(()=>{s(i)},[i,s]),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsxs("button",{onClick:p,className:`flex items-stretch
    border border-zinc-800 bg-zinc-800
     rounded-md overflow-hidden`,children:[e.jsx("span",{className:"flex items-center px-3",children:e.jsx("i",{className:"flex fi fi-rr-apps"})}),e.jsxs("span",{className:"text-base py-2 px-3 bg-zinc-900",children:["Display By ",i," Column"]})]})})},z="_containerLayout_9mmqf_1",L={containerLayout:z},$=o.forwardRef(({movies:c,isFetching:s,error:a,sortOptions:l,defaultGrid:i},t)=>{const[p,m]=o.useState(c),[f,u]=w(),[y,n]=o.useState(i);return o.useEffect(()=>{window.scroll({top:280,left:0,behavior:"smooth"})},[f]),a?e.jsx("div",{children:"Something went wrong"}):e.jsxs("div",{className:L.containerLayout,children:[e.jsxs("div",{className:`flex justify-between items-center 
         bg-zinc-950 sticky top-[81px] left-0 z-20 py-4 px-3 rounded-md mx-2`,children:[e.jsx(C,{options:l,movies:c,setter:m,searchParams:f,setSearchParams:u}),e.jsx(v,{defaultGrid:i,setSelectedGrid:n,searchParams:f,setSearchParams:u})]}),e.jsx("div",{children:e.jsx(S,{movies:p,isLoading:s,ref:t,grid:y})})]})});export{$ as M};

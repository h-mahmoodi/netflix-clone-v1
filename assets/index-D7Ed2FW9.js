import{j as e,p as y,T as v,q as j,i as N,a as D,r as c,h as P,l as w}from"./main-CIuKfFDS.js";import{u as k,a as b}from"./index-DIArOwCB.js";import{S as o}from"./index-BZCZu0kC.js";import{M as C}from"./index-CldYTKHH.js";import"./index-DQBivOJS.js";const R="_header_5jfkl_1",S="_headerContainer_5jfkl_5",B="_headerMovieDetails_5jfkl_10",d={header:R,headerContainer:S,headerMovieDetails:B},T=()=>e.jsx("div",{className:d.header,children:e.jsxs("div",{className:d.headerContainer,children:[e.jsx(o,{className:"w-96 h-12"}),e.jsx(o,{className:"w-96 h-14"}),e.jsxs("div",{className:d.headerMovieDetails,children:[e.jsx(o,{className:"w-40 h-8"}),e.jsx(o,{className:"w-40 h-8"})]})]})}),$="_header_swtg0_1",F="_bannerBackground_swtg0_1",I="_headerOverlay_swtg0_21",L="_headerContainer_swtg0_31",O="_headerTitle_swtg0_35",q="_headerMovieName_swtg0_39",A="_headerMovieDetails_swtg0_43",t={header:$,bannerBackground:F,headerOverlay:I,headerContainer:L,headerTitle:O,headerMovieName:q,headerMovieDetails:A},E=({movie:a})=>{const s=y(),n=()=>{s(`/movies/${a.id}`)};return e.jsxs("div",{className:t.header,style:{backgroundImage:`url(${v.imageUrl}${a==null?void 0:a.backdrop_path})`,backgroundPosition:"center center"},children:[e.jsx("div",{className:t.headerOverlay}),e.jsxs("div",{className:t.headerContainer,children:[e.jsx("div",{className:t.headerTitle,children:"Related Movies"}),e.jsx("div",{className:t.headerMovieName,onClick:n,children:e.jsx("span",{children:(a==null?void 0:a.title)||(a==null?void 0:a.name)})}),e.jsxs("div",{className:t.headerMovieDetails,children:[e.jsxs("span",{children:["Realese Date:",a==null?void 0:a.release_date]}),e.jsxs("span",{children:["IMDb ",a==null?void 0:a.vote_average]})]})]})]})},H="_page_9if0e_1",G="_imageAnimation_9if0e_1",K="_containerLayout_9if0e_15",Q="_moreButton_9if0e_19",U="_gridLayout_9if0e_27",z={page:H,imageAnimation:G,containerLayout:K,moreButton:Q,gridLayout:U},J=[{display:"Name",field:"title"},{display:"IMDb Score",field:"vote_average"},{display:"Popularity",field:"vote_count"},{display:"Released Date",field:"release_date"}],ee=()=>{const[a]=j(),{id:s}=N(),{data:n,isFetching:l,error:h}=D({queryKey:["moviePageDetails",s],queryFn:()=>P(s),enabled:!!s,staleTime:5*60*1e3}),{data:i,isFetching:_,error:g,fetchNextPage:u,hasNextPage:m,isFetchingNextPage:p}=k({queryKey:["MovieRelatedPage",s],queryFn:({pageParam:r})=>w(s,r),getNextPageParam:r=>{if(r.page<r.total_pages)return r.page+1},initialPageParam:1,enabled:!!s}),f=b({fetchNextPage:u,hasNextPage:!!m,isLoading:p}),x=c.useMemo(()=>(i==null?void 0:i.pages.flatMap(r=>r.results))||[],[i]);c.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[a]);const M=()=>{if(l)return e.jsx(T,{});if(h)return e.jsx("div",{children:"Something went wrong"});if(!l&&n)return e.jsx(E,{movie:n})};return console.log(s),e.jsxs("div",{className:z.page,children:[M(),e.jsx(C,{movies:x,isFetching:_,error:g,sortOptions:J,ref:f})]})};export{ee as default};

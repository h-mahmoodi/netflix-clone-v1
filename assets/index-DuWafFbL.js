import{r as c,j as e,q as _}from"./main-DEkHlm8P.js";import{b}from"./index-DE2i_Z4p.js";const N="_container_jfh6l_1",v="_gridLayout_jfh6l_5",g={container:N,gridLayout:v,"width-1-2":"_width-1-2_jfh6l_13","width-1-3":"_width-1-3_jfh6l_16","width-1-4":"_width-1-4_jfh6l_19","width-1-5":"_width-1-5_jfh6l_22","width-1-6":"_width-1-6_jfh6l_25"},C=c.forwardRef(({movies:l,grid:s=5},a)=>e.jsxs("div",{className:g.container,children:[e.jsx("div",{className:g.gridLayout,children:l==null?void 0:l.map((o,i)=>e.jsx("div",{className:g[`width-1-${s}`],children:e.jsx(b,{movie:o})},`${o.id}-${i}`))}),e.jsx("div",{className:g.moreButton,ref:a})]})),S=({options:l,movies:s,setter:a,searchParams:o,setSearchParams:i})=>{const[t,j]=c.useState({field:o.get("sortBy")||null,direction:o.get("sortDir")||null}),[x,f]=c.useState(s.length),u=c.useCallback(()=>{if(!t.field||!t.direction){a(s);return}const n=[...s].sort((h,p)=>{const r=h[t.field],d=p[t.field];return typeof r=="number"&&typeof d=="number"?t.direction==="asc"?r-d:d-r:typeof r=="string"&&typeof d=="string"?t.direction==="asc"?r.localeCompare(d):d.localeCompare(r):0});a(n)},[t.field,t.direction,s,a]),y=n=>{j(h=>{const p=h.field===n&&h.direction==="desc"?"asc":h.field===n&&h.direction==="asc"?null:"desc",r=p?{field:n,direction:p}:{field:null,direction:null};if(r.field&&r.direction)i({...Object.fromEntries(o.entries()),sortBy:r.field,sortDir:r.direction});else{const d=new URLSearchParams(o);d.delete("sortBy"),d.delete("sortDir"),i(d)}return r})};return c.useEffect(()=>{s.length!==x&&f(s.length),u()},[s.length,x,u]),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsx("div",{className:"flex items-center gap-3",children:l.map((n,h)=>e.jsxs("button",{className:`flex items-stretch
                    border border-zinc-800 bg-zinc-800
                     rounded-md overflow-hidden`,onClick:()=>y(n.field),children:[e.jsx("span",{className:"flex items-center px-3",children:t.field===n.field?t.direction==="asc"?e.jsx("i",{className:"flex fi fi-rr-sort-amount-up-alt"}):e.jsx("i",{className:"flex fi fi-rr-sort-amount-down-alt"}):e.jsx("i",{className:"flex fi fi-rr-sort-alt "})}),e.jsx("span",{className:`text-lg py-2 px-3
                 ${t.field===n.field?"bg-zinc-900":"bg-black hover:bg-zinc-950 text-zinc-300"} `,children:n.display})]},`${h}-${n.field}`))})})},m={columns:[4,5,6],selectedColumn:5},L=({defaultGrid:l,setSelectedGrid:s,searchParams:a,setSearchParams:o})=>{const[i,t]=c.useState(+a.get("column")||l||m.selectedColumn),j=()=>{if(m.columns.length>1){const x=m.columns.length,f=m.columns.indexOf(i);console.log(x,"/",f);const u=f<x-1?m.columns[f+1]:m.columns[0];t(u),o({...Object.fromEntries(a.entries()),column:`${u}`})}};return c.useEffect(()=>{s(i)},[i,s]),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsxs("button",{onClick:j,className:`flex items-stretch
    border border-zinc-800 bg-zinc-800
     rounded-md overflow-hidden`,children:[e.jsx("span",{className:"flex items-center px-3",children:e.jsx("i",{className:"flex fi fi-rr-apps"})}),e.jsxs("span",{className:"text-lg py-2 px-3 bg-zinc-900",children:[i," Column"]})]})})},z="_containerLayout_ehv5q_1",w={containerLayout:z},$=c.forwardRef(({movies:l,isFetching:s,error:a,sortOptions:o,defaultGrid:i},t)=>{const[j,x]=c.useState(l),[f,u]=_(),[y,n]=c.useState(i);return c.useEffect(()=>{window.scroll({top:280,left:0,behavior:"smooth"})},[f]),a?e.jsx("div",{children:"Something went wrong"}):l.length===0?e.jsx("div",{className:w.containerLayout,children:"There is nothing to show"}):e.jsxs("div",{className:w.containerLayout,children:[e.jsxs("div",{className:`flex justify-between items-center 
         bg-zinc-950 sticky top-[78px] left-0 z-20 py-4 px-3 rounded-md`,children:[e.jsx(S,{options:o,movies:l,setter:x,searchParams:f,setSearchParams:u}),e.jsx(L,{defaultGrid:i,setSelectedGrid:n,searchParams:f,setSearchParams:u})]}),e.jsx("div",{children:e.jsx(C,{movies:j,isLoading:s,ref:t,grid:y})})]})});export{$ as M};

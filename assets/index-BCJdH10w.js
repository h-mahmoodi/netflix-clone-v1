import{j as e,L as w,r as c,a as v,m as b,n as k}from"./main-BXy35M1J.js";import{b as M}from"./index-CUS1yTeg.js";const $="_carousel_94iuk_1",C="_header_94iuk_5",T="_movies_94iuk_9",q="_navigation_94iuk_18",d={carousel:$,header:C,movies:T,navigation:q},S="_card_ei01k_1",F="_image_ei01k_5",E="_shimmer_ei01k_1",L="_title_ei01k_13",K="_details_ei01k_21",A="_rating_ei01k_25",x={card:S,image:F,shimmer:E,title:L,details:K,rating:A};function H(){return e.jsx("div",{className:x.card,children:e.jsx("div",{className:x.image})})}const I="_header_wx4q5_1",Q="_title_wx4q5_5",R="_button_wx4q5_9",h={header:I,title:Q,button:R};function Y({title:i,link:t}){return e.jsxs("div",{className:h.header,children:[e.jsx("h2",{className:h.title,children:i}),t&&e.jsx(w,{className:h.button,to:t,"aria-label":`show more ${i}`,children:"Show More"})]})}const z="_navigation_28wjs_1",B="_right_28wjs_5",D="_left_28wjs_6",G="_hidden_28wjs_24",u={navigation:z,right:B,left:D,hidden:G};function J({itemsCount:i,viewCount:t,handlerFn:r}){const[s,a]=c.useState(0);return c.useEffect(()=>{r(s)},[r,s]),i<5?null:e.jsxs("div",{className:u.navigation,children:[e.jsx("button",{className:`${u.left} ${s===0?u.hidden:void 0}`,onClick:()=>a(n=>n-1),"aria-label":"previous slide",disabled:s===0,children:e.jsx("i",{className:"fi fi-br-angle-left"})}),e.jsx("button",{className:`${u.right} ${s+t===i?u.hidden:void 0}`,onClick:()=>a(n=>n+1),"aria-label":"next slide",disabled:s+t===i,children:e.jsx("i",{className:"fi fi-br-angle-right"})})]})}function U({title:i,flag:t,link:r,grid:s=5,fetcher:a}){const[n,_]=c.useState([]),{isFetching:f,error:j,data:m}=v({queryKey:["MovieCarousel",i,t],queryFn:a,staleTime:5*60*1e3}),l=c.useMemo(()=>(m==null?void 0:m.results)||[],[m]),g=l.length;c.useEffect(()=>{_(l.slice(0,s))},[l,s]);const y=c.useCallback(o=>{_(l.slice(o,o+s))},[l,s]),p=()=>f?Array(s).fill(null).map((o,N)=>e.jsx(H,{},N)):l.length===0?e.jsx("div",{children:"No item found"}):n.map(o=>e.jsx(M,{movie:o},o.id));return j?e.jsx("div",{className:d.error,children:"Failed to load movies."}):e.jsxs("div",{className:d.carousel,children:[e.jsxs("div",{className:d.header,children:[e.jsx(Y,{title:i,link:r}),e.jsx("div",{className:d.navigation,children:e.jsx(J,{itemsCount:g,viewCount:s,handlerFn:y})})]}),e.jsx("div",{className:d.movies,style:{display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))"},children:p()})]})}const V=({movieId:i})=>{const{data:t,isFetching:r,error:s}=v({queryKey:["movieTrailer",i],queryFn:async()=>b(i),staleTime:3e5}),a=t==null?void 0:t.filter(n=>n.type==="Trailer")[0];return r?e.jsx("div",{className:"flex items-center justify-center w-[700px] h-[400px]",children:e.jsx(k,{})}):s?e.jsx("div",{className:"flex items-center justify-center w-[700px] h-[400px]",children:"Something went wrong"}):e.jsx("div",{children:a&&e.jsx("iframe",{src:`https://www.youtube.com/embed/${a.key}?autoplay=1`,title:"YouTube video player",allowFullScreen:!0,allow:"autoplay",style:{width:"700px",height:"400px"}})})};export{V as M,U as a};

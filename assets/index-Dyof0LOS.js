import{q as m,r,j as i,w as h}from"./main-CZ8tiVXV.js";import{A as y}from"./index-BTjVYmVY.js";import{M as P}from"./index-DQdgxTBl.js";import{u as x,a as v}from"./index-CJ3R8ndw.js";import"./netflix-wkEmooaA.js";import"./index-Vt5uykL0.js";const q=[{display:"Name",field:"title"},{display:"IMDb Score",field:"vote_average"},{display:"Popularity",field:"vote_count"},{display:"Released Date",field:"release_date"}],A=()=>{const[t]=m(),[a,o]=r.useState(t.get("query")||""),{data:s,isFetching:n,error:l,fetchNextPage:u,hasNextPage:c,isFetchingNextPage:p}=x({queryKey:["searchPage",a],queryFn:({pageParam:e})=>h(a,e),getNextPageParam:e=>{if(e.page<e.total_pages)return e.page+1},initialPageParam:1,enabled:!!a}),f=v({fetchNextPage:u,hasNextPage:!!c,isLoading:p});r.useEffect(()=>{t.get("query")!==null?o(t.get("query")):o("")},[t]);const g=r.useMemo(()=>(s==null?void 0:s.pages.flatMap(e=>e.results))||[],[s]),d=a?`Search Results for ${a}`:"Please search something";return i.jsxs("div",{children:[i.jsx(y,{title:d}),i.jsx(P,{movies:g,isFetching:n,error:l,sortOptions:q,ref:f})]})};export{A as default};

import{r as c,j as e,q as _}from"./index-Bi2ni8Ql.js";import{b}from"./index-BZS2T3JC.js";const N="_container_18iw4_1",v="_gridLayout_18iw4_5",w={container:N,gridLayout:v,"width-1-2":"_width-1-2_18iw4_13","width-1-3":"_width-1-3_18iw4_16","width-1-4":"_width-1-4_18iw4_19","width-1-5":"_width-1-5_18iw4_22","width-1-6":"_width-1-6_18iw4_25"},C=c.forwardRef(({movies:i,grid:s=5},d)=>e.jsxs("div",{className:w.container,children:[e.jsx("div",{className:w.gridLayout,children:i==null?void 0:i.map((n,f)=>e.jsx("div",{className:w[`width-1-${s}`],children:e.jsx(b,{movie:n})},`${n.id}-${f}`))}),e.jsx("div",{className:w.moreButton,ref:d})]})),S=({options:i,movies:s,setter:d,searchParams:n,setSearchParams:f})=>{const[t,h]=c.useState({field:n.get("sortBy")||null,direction:n.get("sortDir")||null}),[l,x]=c.useState(s.length),g=c.useCallback(()=>{if(!t.field||!t.direction){d(s);return}const o=[...s].sort((u,p)=>{const r=u[t.field],a=p[t.field];return typeof r=="number"&&typeof a=="number"?t.direction==="asc"?r-a:a-r:typeof r=="string"&&typeof a=="string"?t.direction==="asc"?r.localeCompare(a):a.localeCompare(r):0});d(o)},[t.field,t.direction,s,d]),j=o=>{h(u=>{const p=u.field===o&&u.direction==="desc"?"asc":u.field===o&&u.direction==="asc"?null:"desc",r=p?{field:o,direction:p}:{field:null,direction:null};if(r.field&&r.direction)f({...Object.fromEntries(n.entries()),sortBy:r.field,sortDir:r.direction});else{const a=new URLSearchParams(n);a.delete("sortBy"),a.delete("sortDir"),f(a)}return r})};return c.useEffect(()=>{s.length!==l&&x(s.length),g()},[s.length,l,g]),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsx("div",{className:"flex items-center gap-3",children:i.map((o,u)=>e.jsxs("button",{className:`flex items-stretch
                    border border-zinc-800 bg-zinc-800
                     rounded-md overflow-hidden`,onClick:()=>j(o.field),children:[e.jsx("span",{className:"flex items-center px-3",children:t.field===o.field?t.direction==="asc"?e.jsx("i",{className:"flex fi fi-rr-sort-amount-up-alt"}):e.jsx("i",{className:"flex fi fi-rr-sort-amount-down-alt"}):e.jsx("i",{className:"flex fi fi-rr-sort-alt "})}),e.jsx("span",{className:`text-lg py-2 px-3
                 ${t.field===o.field?"bg-zinc-900":"bg-zinc-950 hover:bg-zinc-900 text-zinc-300"} `,children:o.display})]},`${u}-${o.field}`))})})},m={columns:[4,5,6],selectedColumn:5},z=({setSelectedGrid:i,searchParams:s,setSearchParams:d})=>{const[n,f]=c.useState(+s.get("column")||m.selectedColumn),t=()=>{if(m.columns.length>1){const h=m.columns.length,l=m.columns.indexOf(n);console.log(h,"/",l);const x=l<h-1?m.columns[l+1]:m.columns[0];f(x),d({...Object.fromEntries(s.entries()),column:`${x}`})}};return c.useEffect(()=>{i(n)},[n,i]),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsxs("button",{onClick:t,className:`flex items-stretch
    border border-zinc-800 bg-zinc-800
     rounded-md overflow-hidden`,children:[e.jsx("span",{className:"flex items-center px-3",children:e.jsx("i",{className:"flex fi fi-rr-apps"})}),e.jsxs("span",{className:"text-lg py-2 px-3 bg-zinc-900",children:[n," Column"]})]})})},L="_containerLayout_ehv5q_1",y={containerLayout:L},$=c.forwardRef(({movies:i,isFetching:s,error:d,sortOptions:n},f)=>{const[t,h]=c.useState(i),[l,x]=_(),[g,j]=c.useState(void 0);return c.useEffect(()=>{window.scroll({top:280,left:0,behavior:"smooth"})},[l]),d?e.jsx("div",{children:"Something went wrong"}):i.length===0?e.jsx("div",{className:y.containerLayout,children:"There is nothing to show"}):e.jsxs("div",{className:y.containerLayout,children:[e.jsxs("div",{className:`flex justify-between items-center 
         bg-zinc-950 sticky top-16 left-0 z-20 py-4 px-3`,children:[e.jsx(S,{options:n,movies:i,setter:h,searchParams:l,setSearchParams:x}),e.jsx(z,{setSelectedGrid:j,searchParams:l,setSearchParams:x})]}),e.jsx("div",{children:e.jsx(C,{movies:t,isLoading:s,ref:f,grid:g})})]})});export{$ as M};

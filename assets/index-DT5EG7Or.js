import{Q as R,D as v,E as b,F as E,G as w,r as c}from"./main-C8GEAw96.js";var p=class extends R{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:v()},t)}getOptimisticResult(e){return e.behavior=v(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var P,g;const{state:i}=e,s=super.createResult(e,t),{isFetching:n,isRefetching:a,isError:u,isRefetchError:o}=s,r=(g=(P=i.fetchMeta)==null?void 0:P.fetchMore)==null?void 0:g.direction,f=u&&r==="forward",h=n&&r==="forward",l=u&&r==="backward",d=n&&r==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:b(t,i.data),hasPreviousPage:E(t,i.data),isFetchNextPageError:f,isFetchingNextPage:h,isFetchPreviousPageError:l,isFetchingPreviousPage:d,isRefetchError:o&&!f&&!l,isRefetching:a&&!h&&!d}}};function F(e,t){return w(e,p,t)}const M=({fetchNextPage:e,hasNextPage:t,isLoading:i})=>{const s=c.useRef(null),n=c.useRef(null),[a,u]=c.useState(!1),o=c.useRef(!1);return c.useEffect(()=>{if(!(!t||!a))return s.current||(s.current=new IntersectionObserver(r=>{r[0].isIntersecting&&!o.current&&(o.current=!0,e())},{threshold:.5})),n.current&&s.current.observe(n.current),()=>{var r;(r=s.current)==null||r.disconnect(),s.current=null}},[t,a,e]),c.useEffect(()=>{i||(o.current=!1)},[i]),c.useEffect(()=>{const r=()=>u(!0);return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),n};export{M as a,F as u};

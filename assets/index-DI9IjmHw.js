import{r as i,s as y,j as e,v as O}from"./main-CBcNAbTK.js";import{M as B}from"./index-4msBO5Cw.js";import{A as S}from"./index-CJ72Hj0j.js";import{u as P,a as D}from"./index-BbcGMGTE.js";import"./index-NNPzqKeg.js";import"./netflix-wkEmooaA.js";const I="_container_1jm4i_1",M="_inputBox_1jm4i_5",k="_placeholder_1jm4i_11",C="_placeholderDeactive_1jm4i_16",F="_selectedOptions_1jm4i_20",R="_selectedOption_1jm4i_20",z="_input_1jm4i_5",E="_modalBox_1jm4i_34",w="_modalBoxOption_1jm4i_40",l={container:I,inputBox:M,placeholder:k,placeholderDeactive:C,selectedOptions:F,selectedOption:R,input:z,modalBox:E,modalBoxOption:w},L=({placeholder:h="SelectInput",options:n=[],selectedOptions:a,setSelectedOptions:d})=>{const[p,u]=i.useState(!1),[c,r]=i.useState(""),o=i.useRef(null),[v,t]=i.useState(n),j=y(_),g=()=>{var s;(s=o.current)==null||s.focus(),u(!0)};function _(){var s;(s=o.current)==null||s.focus(),r(""),u(!1)}const N=s=>{d(x=>x.filter(m=>m.value!==s.value))},b=s=>{var m;a.find(f=>f.value===s.value)||(d(f=>[s,...f]),r(""),(m=o.current)==null||m.focus())};return i.useEffect(()=>{t(n.filter(s=>s.label.toLocaleLowerCase().includes(c.toLocaleLowerCase().trim())))},[c,n]),e.jsxs("div",{className:l.container,ref:j,children:[e.jsxs("div",{className:l.inputBox,onClick:g,children:[e.jsx("span",{className:`${l.placeholder} ${a.length>0||p?l.placeholderDeactive:l.placeholderActive}`,children:h}),e.jsxs("div",{className:l.selectedOptions,children:[a.map((s,x)=>e.jsxs("div",{className:l.selectedOption,children:[e.jsx("span",{className:"px-2 py-1",children:s.label}),e.jsx("span",{className:"flex items-center bg-zinc-800 px-1 hover:bg-red-700 cursor-pointer",onClick:()=>N(s),children:e.jsx("i",{className:"flex fi fi-rr-cross-small "})})]},x)),e.jsx("input",{className:l.input,value:c,onChange:s=>r(s.target.value),ref:o,style:{width:`${(c.length+5)*8}px`}})]})]}),p&&e.jsx("div",{className:l.modalBox,children:v.map(s=>e.jsx("div",{className:l.modalBoxOption,onClick:()=>b(s),children:s.label}))})]})},A=[{display:"Name",field:"title"},{display:"IMDb Score",field:"vote_average"},{display:"Popularity",field:"vote_count"},{display:"Released Date",field:"release_date"}],G=[{value:"value 1",label:"label 1"},{value:"value 2",label:"label 2"},{value:"value 3",label:"label 3"},{value:"value 4",label:"label 4"},{value:"value 5",label:"label 5"}],J=()=>{const[h,n]=i.useState([]),{data:a,isFetching:d,error:p,fetchNextPage:u,hasNextPage:c,isFetchingNextPage:r}=P({queryKey:["PopularMoviesPage"],queryFn:({pageParam:t})=>O(t),getNextPageParam:t=>{if(t.page<t.total_pages)return t.page+1},initialPageParam:1}),o=D({fetchNextPage:u,hasNextPage:!!c,isLoading:r}),v=i.useMemo(()=>(a==null?void 0:a.pages.flatMap(t=>t.results))||[],[a]);return i.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[]),e.jsxs("div",{children:[e.jsx(S,{title:"Explore Movies"}),e.jsxs("div",{className:"container mx-auto mt-5 flex gap-3",children:[e.jsx(B,{movies:v,isFetching:d,error:p,sortOptions:A,defaultGrid:4,ref:o}),e.jsxs("div",{className:`w-96 h-screen  mt-2 sticky top-[81px] flex flex-col gap-5
         `,children:[e.jsx("div",{className:" bg-zinc-950 rounded-md py-4 px-3",children:e.jsx(L,{placeholder:"Filter By Genres",options:G,selectedOptions:h,setSelectedOptions:n})}),e.jsx("div",{className:" bg-zinc-950 rounded-md h-20 py-4 px-3",children:e.jsx("h2",{className:"text-xl text-zinc-100 mb-4",children:"Filter By Genres"})}),e.jsx("div",{className:"bg-zinc-950 rounded-md h-20 p-4",children:e.jsx("h2",{className:"text-lg text-zinc-100",children:"Filter By Release Date"})}),e.jsx("div",{className:"bg-zinc-950 rounded-md h-20 p-4",children:e.jsx("h2",{className:"text-lg text-zinc-100",children:"Filter By IMDb Rate"})})]})]})]})};export{J as default};

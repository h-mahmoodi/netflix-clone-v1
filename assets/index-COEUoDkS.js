import{q as m,r,j as i,s as h}from"./main-ntQAJh54.js";import{A as y}from"./index-CDy6G847.js";import{M as P}from"./index-COvUyqkS.js";import{u as x,a as v}from"./index-CJnzKFwo.js";import"./netflix-wkEmooaA.js";import"./index-76_51U5I.js";const q=[{display:"Name",field:"title"},{display:"IMDb Score",field:"vote_average"},{display:"Popularity",field:"vote_count"},{display:"Released Date",field:"release_date"}],A=()=>{const[s]=m(),[a,o]=r.useState(s.get("query")||""),{data:t,isFetching:n,error:l,fetchNextPage:u,hasNextPage:c,isFetchingNextPage:p}=x({queryKey:["searchPage",a],queryFn:({pageParam:e})=>h(a,e),getNextPageParam:e=>{if(e.page<e.total_pages)return e.page+1},initialPageParam:1,enabled:!!a}),f=v({fetchNextPage:u,hasNextPage:!!c,isLoading:p});r.useEffect(()=>{s.get("query")!==null?o(s.get("query")):o("")},[s]);const g=r.useMemo(()=>(t==null?void 0:t.pages.flatMap(e=>e.results))||[],[t]),d=a?`Search Results for ${a}`:"Please search something";return i.jsxs("div",{children:[i.jsx(y,{title:d}),i.jsx(P,{movies:g,isFetching:n,error:l,sortOptions:q,ref:f})]})};export{A as default};
